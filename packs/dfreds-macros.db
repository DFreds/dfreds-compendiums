{"name":"ApplyTargetedSpellCondition","permission":{"default":0,"UCbMK1h2I5FLHGSx":3},"type":"script","flags":{"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":false},"core":{"sourceId":"Macro.2B7JzgsHx2lpOhkz"}},"scope":"global","command":"// This macro should be triggered from an item by midi-qol (enable the 'Add macro to call on use' in workflow settings).\n// Essentially, if a spell is cast that is setup to use this macro, it will apply a CUB condition of the same name\n// if the targeted token fails its save and if a condition exists.\nif (args[0].failedSaves.length > 0) {\n  console.log(`${args[0].item.name}: Targets ${args[0].failedSaves[0].name}`);\n  args[0].failedSaves.forEach(target => game.cub.addCondition(`${args[0].item.name}`, canvas.tokens.get(target._id)));\n}","author":"UCbMK1h2I5FLHGSx","img":"icons/svg/target.svg","actorIds":[],"_id":"IgNBPyENWXvR1KeW"}
